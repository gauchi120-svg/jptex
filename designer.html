<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>設計師搜尋與記錄工具 v2.0 — 合規手動流程輔助</title>
  <style>
    :root {
      --bg: #f7f9fb;
      --card: #fff;
      --text: #0b1220;
      --muted: #6b7280;
      --accent: #0b63d6;
      --border: #e6eef7;
      --shadow: rgba(11,17,26,0.06);
      --transition: 0.2s ease;
    }
    body[data-theme="dark"] {
      --bg: #1a202c;
      --card: #2d3748;
      --text: #f7fafc;
      --muted: #a0aec0;
      --accent: #4299e1;
      --border: #4a5568;
      --shadow: rgba(0,0,0,0.5);
    }
    body {
      font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      transition: background var(--transition), color var(--transition);
    }
    header {
      padding: 18px 20px;
      background: linear-gradient(90deg, var(--accent) 0%, #0b94d6 100%);
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 18px;
    }
    main {
      max-width: 1200px;
      margin: 18px auto;
      padding: 16px;
    }
    .card {
      background: var(--card);
      border-radius: 10px;
      padding: 14px;
      margin-bottom: 14px;
      box-shadow: 0 1px 4px var(--shadow);
      transition: box-shadow var(--transition);
    }
    .card:hover {
      box-shadow: 0 4px 8px var(--shadow);
    }
    label {
      display: block;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 6px;
    }
    input[type="text"], select, textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 14px;
      background: var(--card);
      color: var(--text);
      transition: border var(--transition);
    }
    input:focus {
      border-color: var(--accent);
      outline: none;
    }
    .grid-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }
    .actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 8px;
    }
    button {
      background: var(--accent);
      color: #fff;
      border: 0;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background var(--transition);
    }
    button:hover {
      background: #0850b8;
    }
    button.secondary {
      background: var(--border);
      color: var(--accent);
    }
    button.secondary:hover {
      background: #d1d9e2;
    }
    .tpl-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 8px;
      margin-top: 8px;
    }
    .tpl-item {
      display: flex;
      gap: 8px;
      align-items: center;
      padding: 8px;
      border: 1px solid var(--border);
      border-radius: 6px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
    }
    th, td {
      padding: 8px;
      border-bottom: 1px solid var(--border);
      text-align: left;
    }
    th {
      background: var(--card);
      font-weight: 600;
      cursor: pointer;
    }
    th:hover {
      background: var(--border);
    }
    .small {
      font-size: 12px;
      color: var(--muted);
    }
    .platforms {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .platforms a {
      display: inline-block;
      padding: 6px 10px;
      background: var(--border);
      border-radius: 6px;
      color: var(--accent);
      text-decoration: none;
      border: 1px solid var(--border);
      transition: background var(--transition);
    }
    .platforms a:hover {
      background: var(--accent);
      color: #fff;
    }
    .topbar {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }
    .spaced {
      margin-top: 10px;
    }
    .note {
      font-size: 13px;
      color: var(--muted);
      margin-top: 8px;
    }
    @media (max-width: 720px) {
      .grid-row {
        grid-template-columns: 1fr;
      }
      th, td {
        font-size: 13px;
      }
    }
    /* Dark Mode Toggle */
    #themeToggle {
      background: none;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>設計師搜尋與記錄工具 v2.0 — 合規手動流程輔助</h1>
    <button id="themeToggle">🌙</button>
  </header>

  <main>
    <section class="card">
      <div class="topbar">
        <div>
          <label>主要搜尋關鍵字（例如：「室內設計師」或「室內設計」）</label>
          <input id="keyword" type="text" placeholder="室內設計師">
        </div>
        <div>
          <label>地區（可空白）</label>
          <input id="location" type="text" placeholder="台北">
        </div>
        <div>
          <label>Email domain / pattern（可空白，例如：@gmail.com）</label>
          <input id="emailpattern" type="text" placeholder="@gmail.com">
        </div>
      </div>

      <div class="spaced">
        <label>搜尋語法範本（按「產生搜尋」會把 {keyword} / {location} / {email} 代入）</label>
        <div class="tpl-list" id="templates">
          <!-- templates rendered by JS -->
        </div>

        <div class="actions">
          <button id="openAll">在新分頁開啟全部搜尋（逐一小心）</button>
          <button class="secondary" id="copyAll">複製全部搜尋連結</button>
          <button class="secondary" id="resetInputs">重設欄位</button>
        </div>

        <p class="note">提示：建議手動開啟每一個搜尋結果，逐一檢查設計師頁面或聯絡頁，避免自動化抓取造成風險。</p>
      </div>
    </section>

    <section class="card">
      <label>常用設計師平台（快速前往）</label>
      <div class="platforms" id="platformLinks">
        <!-- platform links injected -->
      </div>
      <p class="note">使用平台內「私訊」或「聯絡表單」是較合規的聯絡方式；若看見公開 Email，可用前面提供的「個人化合作邀請信」一對一聯繫。</p>
    </section>

    <section class="card">
      <label>手動記錄：找到的設計師（可儲存於瀏覽器或匯出/匯入 CSV）</label>
      <div class="grid-row">
        <div>
          <input id="found_name" type="text" placeholder="設計師姓名 / 公司名稱" required>
        </div>
        <div>
          <input id="found_platform" type="text" placeholder="平台（如：IG）">
        </div>
        <div>
          <input id="found_link" type="text" placeholder="作品頁 / 聯絡頁連結">
        </div>
        <div>
          <input id="found_email" type="text" placeholder="公開 Email（如有）">
        </div>
        <div>
          <input id="found_note" type="text" placeholder="備註（例如：已私訊 / 無回應 / 喜歡風格）">
        </div>
      </div>
      <div class="actions spaced">
        <button id="addRow">加入記錄</button>
        <button class="secondary" id="importCSV">匯入 CSV</button>
      </div>

      <div class="spaced">
        <table id="resultsTable" aria-describedby="tableDesc">
          <thead>
            <tr>
              <th data-sort="name">姓名/公司 &#x25B4;</th>
              <th>平台</th>
              <th>作品/聯絡頁</th>
              <th>Email</th>
              <th>備註</th>
              <th class="small">建立時間</th>
              <th class="small">操作</th>
            </tr>
          </thead>
          <tbody id="resultsBody"></tbody>
        </table>

        <div class="actions spaced">
          <button id="exportCSV">匯出 CSV</button>
          <button class="secondary" id="clearAll">清空記錄</button>
        </div>
        <p id="tableDesc" class="note">資料只會儲存在你本機瀏覽器（localStorage），若需分享或搬移請匯出 CSV。</p>
      </div>
    </section>

    <section class="card">
      <label>範例 / 建議使用步驟（合規）</label>
      <ol>
        <li>使用上方輸入關鍵字與地點，點開單一搜尋結果（手動逐一檢視）。</li>
        <li>在作品頁/聯絡頁確認是否為設計師本人公開的 Email（非第三方客戶 Email）。</li>
        <li>用系統內的「加入記錄」記下該筆資料（並註明來源平台與備註）。</li>
        <li>逐一發送個人化合作邀請（勿群發），並保留寄信紀錄與回覆。</li>
      </ol>
      <p class="note">法律提醒：若 Email 為該設計師代收之客戶資料，請勿直接使用或出售；若要分享請先取得該客戶明確同意。</p>
    </section>

    <footer style="text-align:center;margin-top:14px;color:var(--muted);font-size:13px">
      工具版本 2.0 — 由你自主管理資料與操作。請勿用於自動化大規模蒐集或未經授權的名單販售。
    </footer>
  </main>

<script>
(function(){
  // Expanded templates & platforms
  const templates = [
    {name:'site:com.tw "室內設計" "聯絡方式"', tpl:'site:com.tw "{keyword}" "聯絡方式" {location}'},
    {name:'site:tw "@gmail.com" "室內設計"', tpl:'site:tw "{email}" "{keyword}" {location}'},
    {name:'Behance contact search', tpl:'site:behance.net "{keyword}" {location} contact'},
    {name:'site:behance "Taiwan contact"', tpl:'site:behance.net Taiwan "{keyword}" contact'},
    {name:'site:houzz.tw "室內設計師"', tpl:'site:houzz.tw "{keyword}" {location}'},
    {name:'site:instagram "室內設計" profile', tpl:'site:instagram.com "{keyword}" {location}'},
    {name:'泛用：關鍵字 + 聯絡 / Contact', tpl:'"{keyword}" "{location}" "聯絡" OR "Contact"'},
    {name:'含 email domain', tpl:'"{keyword}" "{location}" "{email}"'},
    {name:'LinkedIn 設計師搜尋', tpl:'site:linkedin.com "{keyword}" {location} designer'},
    {name:'Dribbble 作品搜尋', tpl:'site:dribbble.com "{keyword}" {location}'}
  ];

  const platforms = [
    {name:'幸福空間', url:'https://www.xinmedia.com.tw/'},
    {name:'設計家', url:'https://www.designhome.com.tw/'},
    {name:'Behance', url:'https://www.behance.net/'},
    {name:'Houzz', url:'https://www.houzz.com/'},
    {name:'Instagram', url:'https://www.instagram.com/'},
    {name:'LinkedIn', url:'https://www.linkedin.com/'},
    {name:'台灣室內設計公會', url:'https://www.tida.org.tw/'},
    {name:'Dribbble', url:'https://dribbble.com/'},
    {name:'Pinterest', url:'https://www.pinterest.com/'}
  ];

  // DOM refs (same as original, plus new)
  // ... (omitted for brevity, assume same as original)

  // Theme toggle
  const themeToggle = document.getElementById('themeToggle');
  themeToggle.addEventListener('click', () => {
    document.body.dataset.theme = document.body.dataset.theme === 'dark' ? '' : 'dark';
    themeToggle.textContent = document.body.dataset.theme === 'dark' ? '☀️' : '🌙';
  });

  // Render functions (expanded templates)
  // ... (similar to original, but use grid for tpl-list)

  // Table sorting
  function sortTable(by) {
    rows.sort((a, b) => {
      if (by === 'name') return a.name.localeCompare(b.name);
      if (by === 'created') return new Date(b.created) - new Date(a.created);
    });
    renderRows();
  }

  document.querySelectorAll('th[data-sort]').forEach(th => {
    th.addEventListener('click', () => sortTable(th.dataset.sort));
  });

  // CSV Import
  const importBtn = document.getElementById('importCSV');
  importBtn.addEventListener('click', () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.csv';
    input.onchange = e => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = ev => {
        const csv = ev.target.result;
        const lines = csv.split(/\r?\n/);
        lines.shift(); // skip header
        lines.forEach(line => {
          if (!line) return;
          const [name, platform, link, email, note, created] = line.split(',').map(v => v.replace(/^"|"$/g, ''));
          rows.push({name, platform, link, email, note, created: created || new Date().toISOString()});
        });
        persistRows();
        renderRows();
      };
      reader.readAsText(file);
    };
    input.click();
  });

  // Input validation on add
  addRowBtn.addEventListener('click', () => {
    if (!nameInput.value.trim()) {
      alert('姓名/公司名稱為必填項。');
      return;
    }
    // ... (rest same as original)
  });

  // Initial render (same)
  // ...

  // Privacy alert on load
  alert('提醒：本工具僅供合規手動使用，請勿濫用資料。');

})();
</script>
</body>
</html>